<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <title>Blockchain Payments</title>
  <meta name="description" content="Enter your wallet and bill info ‚Äî let your guest handle the tip in crypto." />
  <style>
    :root {
      --bg-light: #d9d9d9;
      --bg-dark: #c3c3c3;
      --panel-light: #f5f5f5;
      --panel-dark: #6f6f6f;
      --panel-mid: #e0e0e0;
      --text: #000;
      --muted: #303030;
      --highlight: #ffffff;
      --shadow: #7d7d7d;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      font-family: "Chicago", "Charcoal", "Geneva", "Segoe UI", sans-serif;
      background:
        linear-gradient(90deg, var(--bg-light) 0, var(--bg-light) 50%, var(--bg-dark) 50%, var(--bg-dark) 100%);
      background-size: 8px 8px;
      color: var(--text);
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 24px;
      gap: 16px;
    }

    .desktop {
      width: min(960px, 100%);
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .menu-bar {
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 6px 12px;
      background: linear-gradient(#6d6d6d, #4c4c4c);
      color: #fff;
      font-size: 14px;
      letter-spacing: 0.3px;
      border: 1px solid #000;
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
    }

    .menu-item { display: inline-flex; gap: 6px; align-items: center; }
    .menu-apple { font-size: 18px; margin-right: 8px; }

    .window {
      margin: 24px auto 0;
      width: min(640px, 95%);
      background: var(--panel-light);
      border: 1px solid #000;
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
    }

    .title-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      background: linear-gradient(#898989, #5c5c5c);
      color: #fff;
      border-bottom: 1px solid #000;
      box-shadow: inset 1px 1px #bbb, inset -1px -1px #333;
    }

    .window-controls { display: inline-flex; gap: 4px; }

    .window-controls span {
      display: inline-block;
      width: 10px;
      height: 10px;
      background: #fff;
      border: 1px solid #000;
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
    }

    .title-text { flex: 1; font-weight: bold; letter-spacing: 0.4px; text-align: center; }

    .window-body { padding: 22px 26px 28px; }

    header.window-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 24px;
    }

    .title { font-size: 18px; font-weight: bold; letter-spacing: 1px; }

    .tags { display: flex; flex-wrap: wrap; gap: 6px; }

    .tag {
      padding: 3px 10px;
      border: 1px solid #000;
      background: var(--panel-mid);
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
      font-size: 13px;
    }

    .beta-note {
      margin-bottom: 16px;
      padding: 10px 12px;
      border: 1px solid #000;
      background: var(--panel-light);
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
      font-weight: bold;
      text-align: center;
    }

    .nav-home {
      display: flex;
      margin-bottom: 16px;
    }

    .card { display: flex; flex-direction: column; gap: 18px; }

    label {
      font-size: 12px;
      color: var(--muted);
      font-weight: bold;
      margin-bottom: 6px;
      letter-spacing: 0.4px;
    }

    input, select {
      width: 100%;
      padding: 9px 10px;
      border: 1px solid #000;
      background: var(--panel-light);
      box-shadow: inset 1px 1px var(--highlight), inset -1px -1px var(--shadow);
      font-family: inherit;
      font-size: 14px;
    }

    .row { display: flex; gap: 12px; flex-wrap: wrap; }

    .field {
      flex: 1;
      min-width: 220px;
      display: flex;
      flex-direction: column;
    }

    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    button.btn, .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 9px 16px;
      border: 1px solid #000;
      background: var(--panel-light);
      box-shadow:
        inset 1px 1px var(--highlight),
        inset -1px -1px var(--shadow),
        2px 2px 0 #000;
      cursor: pointer;
      font-size: 13px;
      text-decoration: none;
      color: inherit;
      transition: none;
      font-family: inherit;
    }

    button.btn:hover, .btn:hover {
      box-shadow:
        inset -1px -1px var(--highlight),
        inset 1px 1px var(--shadow),
        2px 2px 0 #000;
    }

    .btn.primary { background: var(--panel-mid); font-weight: bold; }

    .divider { height: 1px; background: #000; margin: 24px 0; }

    footer {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
      text-align: center;
    }

    footer a { color: inherit; text-decoration: none; font-weight: bold; }
    footer a:hover { text-decoration: underline; }

    @media (max-width: 540px) {
      body { padding: 16px; }
      .menu-bar { font-size: 12px; gap: 12px; }
      .window { width: 100%; margin-top: 12px; }
      .window-body { padding: 18px; }
      .row { flex-direction: column; }
      .field { min-width: 100%; }
    }
  </style>
</head>

<body>
  <div class="desktop">
    <div class="menu-bar">
      <span class="menu-item menu-apple">Ô£ø</span>
      <span class="menu-item">open source tools for hospitality workers</span>
    </div>

    <div class="window">
      <div class="title-bar">
        <div class="window-controls"><span></span><span></span><span></span></div>
        <span class="title-text">Waiter Setup Console</span>
      </div>

      <div class="window-body">
        <div class="nav-home">
          <a class="btn" href="index.html">‚Üê Home</a>
        </div>
        <header class="window-header">
          <div class="title">BLOCKCHAIN PAYMENTS</div>
          <div class="tags">
            <span class="tag" id="tagCrypto">‚Äî</span>
            <span class="tag" id="tagFiat">‚Äî</span>
            <span class="tag" id="tagAddr">‚Äî</span>
          </div>
        </header>

        <p class="beta-note">This setup console is a beta build that is still being polished.</p>

        <section class="card">
          <div class="row">
            <div class="field">
              <label for="crypto">Crypto network</label>
              <select id="crypto">
                <option value="ETH">Ethereum (ETH)</option>
                <option value="BTC">Bitcoin (BTC)</option>
              </select>
            </div>
            <div class="field">
              <label for="fiat">Bill currency</label>
              <select id="fiat">
                <option value="USD">US Dollar ($)</option>
                <option value="EUR">Euro (‚Ç¨)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="bill">Bill amount</label>
              <input id="bill" type="number" step="0.01" min="0" placeholder="Enter bill amount" />
            </div>
            <div class="field">
              <label for="address">Wallet address</label>
              <input id="address" placeholder="Enter your wallet address" />
            </div>
          </div>

          <div class="actions">
            <button class="btn primary" id="toGuest">Open Guest Page</button>
            <button class="btn" id="saveDefaults">Save defaults</button>
            <button class="btn" id="clearDefaults">Clear</button>
          </div>
        </section>

        <div class="divider"></div>
        <footer>
          <p>
            <a href="https://www.reddit.com/u/Square_Ad_7551" target="_blank">@Square_Ad_7551</a> ‚Äî
            Open-source under the
            <a href="https://www.gnu.org/licenses/agpl-3.0.html" target="_blank">AGPL-3.0 License</a>.<br />
            Feel free to reuse or remix this code as long as your project stays open-source too üíõ
          </p>
        </footer>
      </div>
    </div>
  </div>

  <script>
    const $ = s => document.querySelector(s)
    const LS = { crypto: 'TIPFI_CRYPTO', addr: 'TIPFI_ADDR', fiat: 'TIPFI_FIAT' }

    window.addEventListener('DOMContentLoaded', () => {
      $('#crypto').value = localStorage.getItem(LS.crypto) || 'ETH'
      $('#address').value = localStorage.getItem(LS.addr) || ''
      $('#fiat').value = localStorage.getItem(LS.fiat) || 'USD'
      refreshTags()
    })

    ;['crypto', 'address', 'fiat'].forEach(id => {
      $(`#${id}`).addEventListener('input', refreshTags)
      $(`#${id}`).addEventListener('change', refreshTags)
    })

    function refreshTags() {
      const c = $('#crypto').value
      const f = $('#fiat').value
      const a = ($('#address').value || '').trim()
      $('#tagCrypto').textContent = c
      $('#tagFiat').textContent = f
      $('#tagAddr').textContent = a ? `‚Ä¶${a.slice(-6)}` : '‚Äî'
    }

    $('#saveDefaults').addEventListener('click', () => {
      localStorage.setItem(LS.crypto, $('#crypto').value)
      localStorage.setItem(LS.fiat, $('#fiat').value)
      localStorage.setItem(LS.addr, ($('#address').value || '').trim())
      alert('Defaults saved.')
    })

    $('#clearDefaults').addEventListener('click', () => {
      Object.values(LS).forEach(k => localStorage.removeItem(k))
      alert('Cleared.')
    })

    $('#toGuest').addEventListener('click', () => {
      const crypto = $('#crypto').value
      const addr = ($('#address').value || '').trim()
      const bill = parseFloat($('#bill').value)
      const fiat = $('#fiat').value

      if (!addr) {
        alert('Please enter your wallet address.')
        return
      }
      if (!(bill > 0)) {
        alert('Enter a bill amount greater than 0.')
        return
      }

      localStorage.setItem(LS.crypto, crypto)
      localStorage.setItem(LS.fiat, fiat)
      localStorage.setItem(LS.addr, addr)

      const params = new URLSearchParams({ crypto, fiat, addr, bill: bill.toString() })
      location.href = `guest.html?${params.toString()}`
    })
  </script>
</body>
</html>
